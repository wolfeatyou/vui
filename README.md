# VUI - Visual UI Language

VUI (Visual UI Language) - это предметно-ориентированный язык (DSL) для декларативного описания пользовательских интерфейсов. Это расширение VSCode предоставляет подсветку синтаксиса, валидацию и другие инструменты для работы с файлами VUI.

## Возможности

- Подсветка синтаксиса для файлов с расширением `.vui`
- Проверка синтаксиса VUI
- Автодополнение для основных конструкций
- Визуализация AST (абстрактного синтаксического дерева)
- Поддержка блоков с закрывающим литералом `end`

## Установка

### Установка зависимостей

```bash
npm install
```

### Сборка парсера

```bash
npm run build
```

### Установка расширения в VS Code

Чтобы установить расширение в режиме разработки:

1. Нажмите F5 в VS Code для запуска нового окна с вашим расширением
2. Или скопируйте папку проекта в `~/.vscode/extensions/`

## Использование

### Основные команды

В VSCode нажмите Ctrl+Shift+P (или Cmd+Shift+P на Mac) и введите:

- **VUI: Parse File and Show AST** - Парсит текущий файл VUI и показывает абстрактное синтаксическое дерево (AST)
- **VUI: Validate File Syntax** - Проверяет синтаксис текущего файла VUI

### Синтаксис VUI

VUI использует простой декларативный синтаксис для определения:

- Типов данных (`define type ... end`)
- Компонентов (`define component ... end`)
- Потоков данных (`flow`)
- Действий (`define action ... end`)
- Пайпов для трансформации данных (`define pipe ... end`)

Все блоки в языке VUI закрываются ключевым словом `end`. Это делает код более читаемым и структурированным.

Базовый пример:

```vui
# Определение типа
define type Todo
   name string
   checked boolean
end

# Определение компонента
define component instance todo_list
    flow Todo[] todolist
    container
        width 200px
        height 100pc
        content
            button
                title "Add"
                action
                    add
                       a "todolist"
                       b "todo"
                    end
                end
            end
        end
    end
end
```

## Структура блоков

Все определения в VUI имеют чёткую структуру с обязательным закрывающим `end`:

```
define [тип_определения] [имя]
    ...содержимое...
end
```

Вложенные блоки также закрываются ключевым словом `end`:

```
define component type button
    title string
    action
        ...действия...
    end
end
```

## Разработка

### Структура проекта

- `src/grammar.pegjs` - Грамматика PEG.js для парсинга VUI
- `src/extension.js` - Расширение VSCode
- `samples/` - Примеры файлов VUI
- `syntaxes/vui.tmLanguage.json` - Определение подсветки синтаксиса
- `snippets/vui.code-snippets` - Сниппеты для автодополнения

### Тестирование

```bash
npm test
```

Это запустит тесты парсера на примере файла `samples/test.vui`.

## Планы развития

- Улучшение диагностики ошибок
- Интеграция с генераторами HTML/CSS/JS
- Предварительный просмотр UI
- Поддержка дополнительных элементов интерфейса
